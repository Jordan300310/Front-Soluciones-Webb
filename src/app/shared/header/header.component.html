<nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
  <div class="container-fluid px-4">
    <a class="navbar-brand d-flex align-items-center" [routerLink]="['/']">
      <img src="assets/logo_fyj.png" alt="EPP Solutions Logo" height="30" class="me-2" />
      <span class="epp-logo-text">FYJ Multiservicios</span>
    </a>

    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#mainNavbarNav"
      aria-controls="mainNavbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="mainNavbarNav">
      <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a
            class="nav-link"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
            [routerLink]="['/']"
            >Inicio</a
          >
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLinkActive="active" [routerLink]="['/productos']">Productos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLinkActive="active" [routerLink]="['/acerca-de']"
            >Acerca de nosotros</a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            style="cursor: pointer"
            data-bs-toggle="modal"
            data-bs-target="#modalContacto"
          >
            Contacto
          </a>
        </li>
      </ul>

      <div class="d-flex align-items-center gap-2">
        @if (!isLoggedIn) {
        <a [routerLink]="['/auth/register']" class="btn btn-primary btn-sm">
          <span>Registrarse</span>
        </a>
        <a [routerLink]="['/auth/login']" class="btn btn-light btn-sm">
          <span>Iniciar sesión</span>
        </a>
        } @else {
        <span class="navbar-text me-2 d-none d-lg-inline">
          {{ username }}
        </span>
        <a [routerLink]="['/perfil']" class="btn btn-outline-primary btn-sm me-2">
          <span>Perfil</span>
        </a>
        <button (click)="logout()" class="btn btn-outline-danger btn-sm">
          <span>Salir</span>
        </button>
        }
        <a [routerLink]="['/carrito']" class="btn btn-outline-dark btn-sm position-relative me-2">
          <i class="bi bi-cart"></i>

          @if (cartStore.totalItems() > 0) {
          <span
            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
            style="font-size: 0.6em"
          >
            {{ cartStore.totalItems() }}
          </span>
          }
        </a>
      </div>
    </div>
  </div>
</nav>

<div
  class="modal fade"
  id="modalContacto"
  tabindex="-1"
  aria-labelledby="modalContactoLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content shadow-lg border-0 rounded-3">
      <div class="modal-header border-0 p-3 p-sm-4">
        <h5 class="modal-title d-flex align-items-center gap-2" id="modalContactoLabel">
          <img src="assets/logo_fyj.png" alt="EPP Solutions Logo" height="30" class="me-2" />
          <span class="fs-5 fw-bold">FYJ Multiservicios Generales</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body p-4 p-md-5 pt-0">
        <h2 class="h3 fw-bold text-center mb-4 mb-md-5">¿Cómo podemos ayudarte?</h2>

        <div class="row g-4 g-md-5">
          <div class="col-md-6">
            <h3 class="h5 fw-bold mb-4 text-secondary">Nuestros Servicios</h3>
            <div class="d-flex flex-column gap-3">
              <div class="d-flex align-items-center bg-light p-3 rounded-3">
                <div class="me-3 text-primary bg-primary bg-opacity-10 p-2 rounded">
                  <i class="bi bi-truck fs-4"></i>
                </div>
                <div>
                  <p class="mb-0 fw-bold text-dark">ENVÍOS A NIVEL NACIONAL</p>
                  <small class="text-muted">Llegamos a todo el Perú</small>
                </div>
              </div>

              <div class="d-flex align-items-center bg-light p-3 rounded-3">
                <div class="me-3 text-primary bg-primary bg-opacity-10 p-2 rounded">
                  <i class="bi bi-bicycle fs-4"></i>
                </div>
                <div>
                  <p class="mb-0 fw-bold text-dark">DELIVERY INCLUIDO</p>
                  <small class="text-muted">Lima Metropolitana y Callao</small>
                </div>
              </div>

              <div class="d-flex align-items-center bg-light p-3 rounded-3">
                <div class="me-3 text-primary bg-primary bg-opacity-10 p-2 rounded">
                  <i class="bi bi-tools fs-4"></i>
                </div>
                <div>
                  <p class="mb-0 fw-bold text-dark">ASISTENCIA TÉCNICA</p>
                  <small class="text-muted">Gratuita para nuestros clientes</small>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <h3 class="h5 fw-bold mb-4 text-secondary">Contáctanos Directamente</h3>
            <div class="d-flex flex-column gap-4">
              <div>
                <label class="form-label text-muted small mb-1">Teléfonos / WhatsApp</label>

                <div class="input-group mb-2">
                  <span class="input-group-text bg-light border-0"
                    ><i class="bi bi-whatsapp text-success"></i
                  ></span>
                  <a
                    href="https://wa.me/51942014421"
                    target="_blank"
                    class="form-control bg-light border-0 text-decoration-none text-dark fw-semibold"
                  >
                    942 014 421
                  </a>
                </div>

                <div class="input-group">
                  <span class="input-group-text bg-light border-0"
                    ><i class="bi bi-telephone"></i
                  ></span>
                  <a
                    href="tel:+51964129119"
                    class="form-control bg-light border-0 text-decoration-none text-dark fw-semibold"
                  >
                    964 129 119
                  </a>
                </div>
              </div>

              <div>
                <label class="form-label text-muted small mb-1">Correo Electrónico</label>
                <div class="input-group">
                  <span class="input-group-text bg-light border-0"
                    ><i class="bi bi-envelope"></i
                  ></span>
                  <a
                    href="mailto:fj.distrib.cotizaciones@gmail.com"
                    class="form-control bg-light border-0 text-decoration-none text-dark text-truncate"
                  >
                    fj.distrib.cotizaciones@gmail.com
                  </a>
                </div>
              </div>

              <div class="d-grid gap-2">
                <a
                  href="https://www.facebook.com/people/FYJ-Multiservicios-Generales/61552232917492/"
                  target="_blank"
                  class="btn btn-primary py-2 fw-semibold d-flex align-items-center justify-content-center gap-2"
                  style="background-color: #1877f2; border-color: #1877f2"
                >
                  <i class="bi bi-facebook"></i> Visitar Facebook
                </a>

                <a
                  href="mailto:fj.distrib.cotizaciones@gmail.com?subject=Solicitud%20de%20Cotización"
                  class="btn btn-outline-dark py-2 fw-semibold"
                >
                  Solicitar Cotización por Correo
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
